(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[902],{4065:function(e,s,t){Promise.resolve().then(t.bind(t,562))},562:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return h}});var a=t(7437),n=t(2265),r=t(9376),i=t(2381),l=t(1817),c=t(4938),d=t(2735),o=t(2451),m=t(407),x=t(7648);function h(){let e=(0,r.useParams)().id,[s,t]=(0,n.useState)(null),[h,u]=(0,n.useState)(!0),[p,g]=(0,n.useState)(""),[f,b]=(0,n.useState)(0),[v,j]=(0,n.useState)(!1),w=(0,n.useRef)(null);(0,n.useEffect)(()=>{let s=null,a=async()=>{try{let a=await fetch("/api/generate?id=".concat(e));if(!a.ok)throw Error("Donn\xe9es non trouv\xe9es");let n=await a.json();t(n),"processing"===n.status?(u(!1),s=setInterval(async()=>{try{let a=await fetch("/api/generate?id=".concat(e));if(a.ok){let e=await a.json();t(e),("completed"===e.status||"failed"===e.status)&&s&&clearInterval(s)}}catch(e){console.error("Polling error:",e)}},5e3)):u(!1)}catch(e){g("Impossible de charger les slides. Veuillez r\xe9essayer."),u(!1)}};return e&&a(),()=>{s&&clearInterval(s)}},[e]);let N=()=>{b(e=>Math.max(0,e-1))},y=()=>{s&&b(e=>Math.min(s.slides.length-1,e+1))},k=e=>{"ArrowLeft"===e.key?N():"ArrowRight"===e.key&&y()};(0,n.useEffect)(()=>(window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)));let A=async()=>{j(!0);let e=window.open("","_blank");e&&s&&(s.slides.map((e,s)=>{let t=e.replace("</head>","\n          <style>\n            @media print {\n              * { -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; color-adjust: exact !important; }\n              body { background-color: inherit !important; }\n              .slide-container, body { page-break-after: always; }\n            }\n            @page { size: 1280px 720px landscape; margin: 0; }\n          </style>\n        </head>");return'<div class="slide-page" style="page-break-after: always; width: 1280px; height: 720px; overflow: hidden;">'.concat(t,"</div>")}).join(""),e.document.write("\n        <!DOCTYPE html>\n        <html>\n        <head>\n          <title>Slides - ".concat(s.userName,"</title>\n          <style>\n            @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&display=swap');\n            @font-face { font-family: 'Mersad'; src: url('/MersadBlack.otf') format('opentype'); }\n            * { margin: 0; padding: 0; box-sizing: border-box; }\n            body { background: #1A1A1A; }\n            .slide-page { width: 1280px; height: 720px; overflow: hidden; page-break-after: always; }\n            .slide-page iframe { width: 100%; height: 100%; border: none; }\n            @media print {\n              * { -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; color-adjust: exact !important; }\n              @page { size: 1280px 720px landscape; margin: 0; }\n              body { background: transparent !important; }\n            }\n          </style>\n        </head>\n        <body>\n          ").concat(s.slides.map((e,s)=>'\n            <div class="slide-page">\n              <iframe srcdoc="'.concat(e.replace(/"/g,"&quot;"),'" style="width:1280px;height:720px;border:none;"></iframe>\n            </div>\n          ')).join(""),"\n          <script>\n            setTimeout(() => { window.print(); }, 1500);\n          </script>\n        </body>\n        </html>\n      ")),e.document.close()),setTimeout(()=>j(!1),2e3)};return h?(0,a.jsx)("div",{className:"min-h-screen bg-[#1A1A1A] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(l.Z,{className:"w-12 h-12 text-[#FF4500] animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-white text-lg",children:"Chargement de vos slides..."})]})}):p?(0,a.jsx)("div",{className:"min-h-screen bg-[#1A1A1A] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-red-500 text-lg mb-4",children:p}),(0,a.jsx)(x.default,{href:"/",children:(0,a.jsxs)(i.z,{className:"bg-[#FF4500] hover:bg-[#FF5722]",children:[(0,a.jsx)(c.Z,{className:"w-4 h-4 mr-2"}),"Retour \xe0 l'accueil"]})})]})}):s&&("processing"===s.status||"pending"===s.status)?(0,a.jsx)("div",{className:"min-h-screen bg-[#1A1A1A] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center max-w-md",children:[(0,a.jsxs)("div",{className:"relative mb-8",children:[(0,a.jsx)("div",{className:"w-24 h-24 border-4 border-[#333] border-t-[#FF4500] rounded-full animate-spin mx-auto"}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDD0D"})})]}),(0,a.jsx)("h2",{className:"text-white text-2xl font-semibold mb-4",children:"Analyse en cours..."}),(0,a.jsxs)("p",{className:"text-gray-400 mb-2",children:["Notre IA analyse le profil LinkedIn de ",(0,a.jsx)("span",{className:"text-[#FF4500] font-semibold",children:s.userName})]}),(0,a.jsxs)("p",{className:"text-gray-500 text-sm mb-6",children:["Extraction des comp\xe9tences, exp\xe9riences et g\xe9n\xe9ration des slides personnalis\xe9es.",(0,a.jsx)("br",{}),"Cela peut prendre 2-3 minutes."]}),(0,a.jsxs)("div",{className:"bg-[#222] rounded-lg p-4 text-left",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-[#FF4500] rounded-full animate-pulse"}),(0,a.jsx)("span",{className:"text-gray-300 text-sm",children:"Visite du profil LinkedIn"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-[#333] rounded-full"}),(0,a.jsx)("span",{className:"text-gray-500 text-sm",children:"Analyse des comp\xe9tences"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-[#333] rounded-full"}),(0,a.jsx)("span",{className:"text-gray-500 text-sm",children:"G\xe9n\xe9ration des id\xe9es d'apps"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-[#333] rounded-full"}),(0,a.jsx)("span",{className:"text-gray-500 text-sm",children:"Cr\xe9ation des slides HTML"})]})]})]})}):s&&0!==s.slides.length?(0,a.jsxs)("div",{className:"min-h-screen bg-[#0D0D0D] flex flex-col",children:[(0,a.jsx)("header",{className:"bg-[#1A1A1A] border-b border-[#333] px-6 py-4",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(x.default,{href:"/",className:"text-gray-400 hover:text-white transition-colors",children:(0,a.jsx)(c.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-white font-semibold",children:["Feuille de route pour ",s.userName]}),(0,a.jsxs)("p",{className:"text-gray-500 text-sm",children:[s.slides.length," slides • G\xe9n\xe9r\xe9e le"," ",new Date(s.createdAt).toLocaleDateString("fr-FR")]})]})]}),(0,a.jsxs)(i.z,{onClick:A,disabled:v,className:"bg-[#FF4500] hover:bg-[#FF5722]",children:[v?(0,a.jsx)(l.Z,{className:"w-4 h-4 mr-2 animate-spin"}):(0,a.jsx)(d.Z,{className:"w-4 h-4 mr-2"}),"Exporter PDF"]})]})}),(0,a.jsxs)("main",{className:"flex-1 flex flex-col items-center justify-center p-8",children:[(0,a.jsx)("div",{className:"relative w-full max-w-[1280px] aspect-[16/9] bg-[#1A1A1A] rounded-lg overflow-hidden shadow-2xl",children:(0,a.jsx)("iframe",{ref:w,srcDoc:s.slides[f],className:"w-full h-full border-0",title:"Slide ".concat(f+1)})}),(0,a.jsxs)("div",{className:"flex items-center gap-6 mt-8",children:[(0,a.jsx)(i.z,{variant:"outline",size:"icon",onClick:N,disabled:0===f,className:"w-12 h-12 rounded-full border-[#333] bg-[#1A1A1A] hover:bg-[#222] disabled:opacity-30",children:(0,a.jsx)(o.Z,{className:"w-6 h-6"})}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:s.slides.map((e,s)=>(0,a.jsx)("button",{onClick:()=>b(s),className:"w-3 h-3 rounded-full transition-all ".concat(s===f?"bg-[#FF4500] scale-125":"bg-[#333] hover:bg-[#555]")},s))}),(0,a.jsx)(i.z,{variant:"outline",size:"icon",onClick:y,disabled:f===s.slides.length-1,className:"w-12 h-12 rounded-full border-[#333] bg-[#1A1A1A] hover:bg-[#222] disabled:opacity-30",children:(0,a.jsx)(m.Z,{className:"w-6 h-6"})})]}),(0,a.jsxs)("p",{className:"text-gray-500 mt-4 text-sm",children:["Slide ",f+1," / ",s.slides.length," • Utilisez les fl\xe8ches ← → pour naviguer"]})]}),(0,a.jsx)("div",{className:"bg-[#1A1A1A] border-t border-[#333] p-4",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,a.jsx)("div",{className:"flex gap-4 overflow-x-auto pb-2",children:s.slides.map((e,s)=>(0,a.jsx)("button",{onClick:()=>b(s),className:"flex-shrink-0 w-40 aspect-[16/9] rounded-lg overflow-hidden border-2 transition-all ".concat(s===f?"border-[#FF4500] shadow-lg shadow-[#FF4500]/20":"border-transparent hover:border-[#333]"),children:(0,a.jsx)("iframe",{srcDoc:e,className:"w-[640px] h-[360px] scale-[0.0625] origin-top-left pointer-events-none",title:"Thumbnail ".concat(s+1),style:{transform:"scale(0.25)",transformOrigin:"top left",width:"160px",height:"90px"}})},s))})})})]}):(0,a.jsx)("div",{className:"min-h-screen bg-[#1A1A1A] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-red-500 text-lg mb-4",children:"Aucune slide disponible"}),(0,a.jsx)(x.default,{href:"/",children:(0,a.jsxs)(i.z,{className:"bg-[#FF4500] hover:bg-[#FF5722]",children:[(0,a.jsx)(c.Z,{className:"w-4 h-4 mr-2"}),"Retour \xe0 l'accueil"]})})]})})}},2381:function(e,s,t){"use strict";t.d(s,{z:function(){return c}});var a=t(7437);t(2265);var n=t(5293),r=t(535),i=t(3448);let l=(0,r.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:s,variant:t="default",size:r="default",asChild:c=!1,...d}=e,o=c?n.g7:"button";return(0,a.jsx)(o,{"data-slot":"button","data-variant":t,"data-size":r,className:(0,i.cn)(l({variant:t,size:r,className:s})),...d})}},3448:function(e,s,t){"use strict";t.d(s,{cn:function(){return r}});var a=t(1994),n=t(3335);function r(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,n.m6)((0,a.W)(s))}}},function(e){e.O(0,[498,164,971,117,744],function(){return e(e.s=4065)}),_N_E=e.O()}]);