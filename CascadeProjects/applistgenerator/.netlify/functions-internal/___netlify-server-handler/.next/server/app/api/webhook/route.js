"use strict";(()=>{var e={};e.id=570,e.ids=[570],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6005:e=>{e.exports=require("node:crypto")},8297:(e,o,s)=>{s.r(o),s.d(o,{originalPathname:()=>g,patchFetch:()=>b,requestAsyncStorage:()=>c,routeModule:()=>p,serverHooks:()=>h,staticGenerationAsyncStorage:()=>k});var r={};s.r(r),s.d(r,{GET:()=>l,POST:()=>d});var t=s(9303),n=s(8716),a=s(670),i=s(7070),u=s(6047);async function d(e){try{let o=await e.json();console.log("\uD83D\uDCE5 Webhook received from Manus"),console.log("\uD83D\uDCE6 Body keys:",Object.keys(o));let{taskId:s,slides:r,userName:t}=o;if(!s)return console.error("❌ Webhook: Missing taskId"),i.NextResponse.json({error:"taskId manquant"},{status:400});if(!r||!Array.isArray(r))return console.error("❌ Webhook: Invalid slides format"),i.NextResponse.json({error:"Format slides invalide"},{status:400});console.log(`✅ Webhook: Received ${r.length} slides for task ${s}`);let n=!1;for(let[e,o]of u.slidesStore.entries())if(o.manusTaskId===s){o.slides=r,o.status="completed",u.slidesStore.set(e,o),n=!0,console.log(`✅ Updated slides for ID ${e}`);break}return n||console.log(`⚠️ Original task not found, storing with taskId: ${s}`),i.NextResponse.json({success:!0,message:`Received ${r.length} slides`,taskId:s})}catch(e){return console.error("❌ Webhook error:",e),i.NextResponse.json({error:"Erreur webhook"},{status:500})}}async function l(){return i.NextResponse.json({status:"Webhook endpoint ready",usage:"POST with { taskId, slides: [...] }"})}let p=new t.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/webhook/route",pathname:"/api/webhook",filename:"route",bundlePath:"app/api/webhook/route"},resolvedPagePath:"/Users/dibrilou/Desktop/Projet/VibeCoding/Applist/applist-saas/src/app/api/webhook/route.ts",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:c,staticGenerationAsyncStorage:k,serverHooks:h}=p,g="/api/webhook/route";function b(){return(0,a.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:k})}}};var o=require("../../../webpack-runtime.js");o.C(e);var s=e=>o(o.s=e),r=o.X(0,[948,108,47],()=>s(8297));module.exports=r})();